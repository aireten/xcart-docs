---
lang: ru
layout: article_with_sidebar
updated_at: '2017-12-28 15:38 +0400'
title: Настройка очереди фоновых задач
order: 80
published: false
identifier: ref_queue
---
X-Cart выполняет времязатратные задачи (например, отправку почты или изменение размеров изображений) асинхронно, тем самым сокращая время отклика пользовательского интерфейса и ускоряя работу магазина.  

Фоновые работы ускоряют следующие операции в магазине:

- действия с заказами (создание, изменение статуса доставки и оплаты, обработка посредством модуля AOM);
- все действия, подразумевающие отправку сообщений по электронной почте;
- Перенос изображений в облако Amazon S3.

## Постановка задач в очередь

Чтобы создать очередь служебных задач, включите следующую опцию в файле `etc/config.php`:

```
[queue]
backgroundJobsSchedulingEnabled = true
```

После этого все задачи будут выстраиваться в очередь, а не выполняться сразу же. Есть несколько способов запуска задач в очереди:

### Планировщик задач

Если сервер настроен для {% link "выполнения запланированных задач X-Cart" ref_cronjob28 %}, очередь будет обновляться при каждом следующем запуске планировщика. Рекомендуется установить минимальный интервал запуска планировщика: 5-10 минут.

### Консольное приложение

Чтобы контролировать прохождение очереди задач через внешний скрипт, запустите следующую команду в директории X-Cart:

```
php console.php --target=consumer --action=consumeAll
```

### Браузер

Отслеживать выполнение задач можно и в панели управления магазина на странице `admin.php?target=jobs` Чтобы эта страница открывалась, в разделе `[queue]` файла `config.php` должна присутствовать следующая опция:

```
jsRunnerForOnlineEnabled = true
```

Эта опция активирована по умолчанию.

