---
lang: ru
layout: article_with_sidebar
updated_at: '2017-11-21 12:21 +0400'
identifier: ref_uLSlTTpi
title: >-
  Что делать, если вместо магазина открывается страница с надписью "We are
  deploying new changes" 
order: 50
published: true
---
Иногда во время установки модуля, обновления магазина или перестроения кеша возникают проблемы. Синтаксическая ошибка в коде нового модуля, несовместимость модуля с новой версией ядра X-Cart или сбой перестройки кеша могут привести к повреждению магазина. Вследствие чего вместо магазина вы будете видеть надпись “The site is temporarily closed for maintenance”:

![1.jpg]({{site.baseurl}}/attachments/ref_uLSlTTpi/1.jpg)


Данная статья рассказывает, что делать при возникновении такой проблемы, и как вернуть магазин в рабочее состояние. 

## Содержание

*   [Сброс и перестроение кеша магазина](#сброс-и-перестроение-кеша-магазина)
*   [Помощь хостинг провайдера](#помощь-хостинг-провайдера)
*   [Восстановление магазина с помощью режима защиты от сбоев](#восстановление-магазина-с-помощью-режима-защиты-от-сбоев)

## Сброс и перестроение кеша магазина

Если вы считаете, что проблема вызвана некорректным перестроением кеша магазина, очистите кеш и запустите его перестроение заново. Обычно, кеш перестраивается во время обновления ядра магазина, установки модуля, включения или отключения модуля, или при ручном запуске **Перезагрузить магазин** на странице **Инструменты** / **Управление кешем** в зоне администратора магазина. Если магазин перестал работать после одного из этих действий, скорее всего, проблема вызвана кешем. Существует множество причин сбоя перестройки кеша сайта, и одна из самых распространенных - закрытие страницы в браузере во время перестройки кеша. Не зависимо от причины сбоя, есть пути решения данной проблемы:

1. Откройте свой магазин по ссылке следующего вида:
``https://www.example.com/x-cart/admin.php?drop_cache&access_key=XXXXXXXXXXXXXX`` 
   Вместо `https://www.example.com/x-cart/` укажите адрес магазина и вместо `XXXXXXXXXXXXX` - свой ключ безопасного режима. Ключ безопасного режима можно скопировать из файла `var/data/.safeModeAccessKey` в папке установки магазина или из любой из двух ссылок для восстановления, отправленных администратору после установки магазина (сообщение с заголовком **"Ссылки для частичной и полной переустановки магазина!"**).  
   При использовании такой ссылки для восстановления, кеш магазина сбрасывается, и автоматически запускается перестройка кеша.
2. Удалите папку **var/run** и файл **var/.rebuildStarted** в директории установки магазина и перейдите в зону администратора. X-Cart автоматически определит отсутствие кеша и запустить процесс его создания. 

## Помощь хостинг провайдера

Надежные хостинг провайдеры ежедневно создают полный бэкап магазина (файлов и базы данных). Идеальные - даже чаще. Если ваш сайт поврежден, попросите хостинг провайдера восстановить его из бэкапа.

## Восстановление магазина с помощью режима защиты от сбоев

Если хостинг не отвечает или вы работаете в тестовой среде, придется установить причину сбоя и найти решение самостоятельно. Вам поможет режим защиты от сбоев, который позволяет восстановить магазин с минимальным набором модулей и найти причину проблемы. 

Для запуска режима защиты необходимо открыть магазин по ссылке частичного или полного сброса на странице **Инструменты** / **Безопасный режим** в зоне администратора. Также, эти ссылки были высланы вам по почте по завершении установки магазина.

Формат ссылок:

*   Полное восстановление::
    `http://<shop_domain>/admin.php?target=main&safe_mode=1&access_key=<shop_key>`
*   Частичное восстановление:: 
    `http://<shop_domain>/admin.php?target=main&safe_mode=1&access_key=<shop_key>&soft_reset=1`
    

Если эти ссылки не работают, их можно сделать вручную, заменив `<shop_domain>` доменом магазина и `<shop_key>` своим ключом безопасного режима из файла **var/data/.safeModeAccessKey**.
    
Ссылка восстановления отключает часть или все модули, установленные в магазине. Далее, X-Cart восстанавливается. Как только магазин снова становится онлайн, вы можете включать модули один за другим, чтобы увидеть, который из них приводит к сбою. Как только определили проблемный модуль, обратитесь к его разработчику за помощью.  
    

На странице безопасного режима вы найдете ссылку для восстановления текущего набора активных модулей. Имеется в виду набор модулей, включенных на момент сбоя. Ссылка полезна, если вы хотите сохранить текущую версию магазина и восстановить магазин в этом состоянии позже. Вы можете скопировать ссылку и сохранить ее в отдельном файле, прежде чем устанавливать новый модуль. Если во время установки модуля возникнет проблема, вы сможете пройти по сохраненной ссылке и восстановить магазин: магазин будет восстановлен с теми модулями, которые были активированы на момент создания резервной ссылки. Формат ссылки текущей версии магазина: 
   
   `http://<shop_domain>/admin.php?target=main&safe_mode=1&access_key=<shop_key>&date=<restore_date>`
   
  При необходимости, ссылку можно получить, заменив `<shop_domain`> доменом магазина, `<shop_key>` - ключом безопасного режима из файла `var/data/.safeModeAccessKey` и `<restore_date>` - датой версии, которую требуется восстановить.
  
  _Дополнительная информация:_

* {% link "Восстановление магазина с помощью мгновенного сохранения данных" ref_PTtxOzz4 %}
